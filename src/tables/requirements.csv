Request Requirements,Server Requirements,Response Requirements,Protocol Operation
Group: All Requests,,,
MAY specify `Authorization` and `On-Behalf-Of` headers (i.e. if authenticating this request),"If `Authorization` (and optionally `On-Behalf-Of`) headers are provided, MUST authenticate the request",,
,,,
Group: Modify Requests,,,
"MUST provide the `Content-Disposition` header, with the appropriate value for the request","If all preconditions are met, MUST either accept the deposit request immediately, queue the request for processing, or respond with an error",MUST include `ETag` header if implementing concurrency control,
,,,
Group: Create Requests,,,
MAY provide the `Slug` header,"If a `Slug` header is provided, MAY use this as the identifier for the newly created Object.","MUST respond with a `Location` header, containing the Object-URL",POST Service-URL
,,MUST respond with a valid Status document or a suitable error response,
,,Status document MUST be available on GET to the Object-URL in the `Location` header immediately (irrespective of whether this is a `201` or `202` response),
,,"MUST respond with a `201` if the item was created immediately, a `202` if the item was queued for import, or raise an error.",
,,,
Group: Create With Content Requests,,,
MAY provide the `In-Progress` header,"If no `In-Progress` header is provided, MUST assume that it is `false`",,
,"If `In-Progress` is `false`, SHOULD expect further updates to the item, and not progress it through any ingest workflows yet.",,
,,,
Group: Create With Segment Upload Initialisation,,,
MUST provide the `In-Progress` header with value `true`,"If no `In-Progress` header is provided, MUST NOT accept the request","If no `In-Progress` header is provided, MUST respond with a `412` error",
,,MUST reject the request if the conditions of the upload are not acceptable,
,,,
Group: Update Requests,,,
"MUST include the `If-Match` header, if the server implements concurrency control",MUST reject the request if the `If-Match` header does not match the current `ETag` of the resource,,
,,,
,,,
Group: Append Requests,,,
,,"MUST respond with a `200` if the request was accepted immediately, a `202` if the request was queued for processing, or raise an error.",
,,,
Group: Delete Requests,,,
,,"MUST respond with a `204` if the delete is successful, or raise an error",
,,,
Group: Empty Body,,,
MAY provide the `Content-Length` header with value `0`,,,
MUST NOT include any body content,,,
,,,
Group: Has Body Content,,,
MUST provide the `Content-Type` and `Digest` headers,MUST verify that the content matches the `Digest` header,MUST include a File-URL for the deposited content in the Status document.  The behaviour of this File-URL may vary depending on the type of content deposited (e.g. ByReference and Segmented Uploads do not need to be immediately retrievable),
SHOULD provide the `Content-Length`,MUST verify that the supplied content matches the `Content-Length` if this is provided,,
,,,
Group: Metadata Body Content,,,
SHOULD provide the `Metadata-Format` header,"If no `Metadata-Format` header is provided, MUST assume this is the standard SWORD format: http://purl.org/net/sword/3.0/types/Metadata",,
MUST provide only the Metadata document,,,
,,,
Group: By-Reference Body Content,,,
MUST provide the By-Reference document,"If downloading copies of the files in the By-Reference document, MUST do this asynchronously to the deposit request",,
,,,
Group: Metadata + By-Reference Body Content,,,
SHOULD provide the Metadata-Format header,"If no Metadata-Format header is provided, MUST assume this is the standard SWORD format: http://purl.org/net/sword/3.0/types/Metadata",,
MUST provide the Metadata+By Reference document,"If downloading copies of the files in the By-Reference document, MUST do this asynchronously to the deposit request",,
,,,
Group: Binary File Content,,,
"MAY provide the Packaging header, and if so MUST be the Binary format identifier",The server SHOULD NOT attempt to unpack the file,,
MUST provide Binary File body content,,,
,,,
Group: Packaged Content,,,
MUST provide the Packaging header,The server MAY attempt to unpack the file,,
MUST provide Packaged Content in the request body,,,
,,,
Group: Retrieve Service-URL,,,
,,"If Authorization (and optionally On-Behalf-Of) headers are provided, MUST only list Service-URLs in the Service Document for which a deposit request would be permitted",GET Service-URL
,,MUST respond with a valid Service Document or a suitable error response,
,,,
Group: Retrieve Object-URL,,,
,,MUST respond with a valid Status document or a suitable error response,GET Object-URL
,,MUST include ETag header if implementing concurrency control,
,,,
Group: Update Object-URL with Segmented Upload Initialisation,,,
MUST provide the In-Progress header with value `true`,,MUST respond with a valid Status document or a suitable error response,
,,MUST include ETag header if implementing concurrency control,
,,,
Group: Update Object-URL,,,
MAY provide the In-Progress header,"If no `In-Progress` header is provided, MUST assume that it is `false`",MUST respond with a valid Status document or a suitable error response,
,,MUST include ETag header if implementing concurrency control,
,,,
Group: Append Object-URL,,,
,,,POST Object-URL
,,,
Group: Retrieve Components,,,
,,MUST include ETag header if implementing concurrency control,
,,,
Group: Update Components,,,
,,MUST include ETag header if implementing concurrency control,
,,,
Group: Replace Components,,,
,,"MUST respond with a `204` if the replacement was deposited immediately, a `202` if the replacement was queued for import, or raise an error.",
,,,
Group: Retrieve Metadata-URL,,,
,,MUST respond with a valid Metadata document (see definition below) or a suitable error response,GET Metadata-URL
,,,
Group: Retrieve File-URL,,,
,,"MUST respond with a File (which may be Packaged Content, a Binary File, a Metadata document, or any other file that the server exposes) or a suitable error response",GET File-URL