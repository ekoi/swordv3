<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SWORDv3 Specification</title>

    <link rel="stylesheet" href="swordv3.css">
</head>
<body>

<h1 class="main_title">SWORDv3 Specification</h1><p><div class=nav>
<div class=toc></p>
<ul>
<li><a href="#1.">1. Credits</a></li>
<li><a href="#2.">2. Introduction</a></li>
<li><a href="#3.">3. Notational Conventions</a></li>
<li><a href="#4.">4. Terminology</a><ul>
<li><a href="#4.1.">4.1. URLs</a></li>
<li><a href="#4.2.">4.2. Document Types</a></li>
<li><a href="#4.3.">4.3. Namespaces</a></li>
</ul>
</li>
<li><a href="#5.">5. HTTP Headers</a></li>
<li><a href="#6.">6. Protocol Operations</a><ul>
<li><a href="#6.1.">6.1. Error Responses</a></li>
<li><a href="#6.2.">6.2. Redirects</a></li>
<li><a href="#6.3.">6.3. HTTP Requests</a><ul>
<li><a href="#6.3.1.">6.3.1. GET Service-URL</a></li>
<li><a href="#6.3.2.">6.3.2. POST Service-URL</a></li>
<li><a href="#6.3.3.">6.3.3. GET Object-URL</a></li>
<li><a href="#6.3.4.">6.3.4. POST Object-URL</a></li>
<li><a href="#6.3.5.">6.3.5. PUT Object-URL</a></li>
<li><a href="#6.3.6.">6.3.6. DELETE Object-URL</a></li>
<li><a href="#6.3.7.">6.3.7. GET Metadata-URL</a></li>
<li><a href="#6.3.8.">6.3.8. PUT Metadata-URL</a></li>
<li><a href="#6.3.9.">6.3.9. PUT FileSet-URL</a></li>
<li><a href="#6.3.10.">6.3.10. DELETE FileSet-URL</a></li>
<li><a href="#6.3.11.">6.3.11. GET File-URL</a></li>
<li><a href="#6.3.12.">6.3.12. PUT File-URL</a></li>
<li><a href="#6.3.13.">6.3.13. DELETE File-URL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#7.">7. Protocol Requirements</a><ul>
<li><a href="#7.1.">7.1. Requirement Hierarchies</a></li>
<li><a href="#7.2.">7.2. Requirement Groups</a><ul>
<li><a href="#7.2.1.">7.2.1. Request: *, Content: *, Resource: *</a></li>
<li><a href="#7.2.2.">7.2.2. Request: Retrieve, Content: *, Resource: Service-URL</a></li>
<li><a href="#7.2.3.">7.2.3. Request: Retrieve, Content: *, Resource: Object-URL</a></li>
<li><a href="#7.2.4.">7.2.4. Request: Retrieve, Content: *, Resource: Components</a></li>
<li><a href="#7.2.5.">7.2.5. Request: Retrieve, Content: *, Resource: Metadata-URL</a></li>
<li><a href="#7.2.6.">7.2.6. Request: Retrieve, Content: *, Resource: File-URL</a></li>
<li><a href="#7.2.7.">7.2.7. Request: Modify, Content: *, Resource: *</a></li>
<li><a href="#7.2.8.">7.2.8. Request: Modify, Content: Body, Resource: *</a></li>
<li><a href="#7.2.9.">7.2.9. Request: Modify, Content: Metadata, Resource: *</a></li>
<li><a href="#7.2.10.">7.2.10. Request: Modify, Content: By-Reference, Resource: *</a></li>
<li><a href="#7.2.11.">7.2.11. Request: Modify, Content: By-Reference, Resource: File-URL</a></li>
<li><a href="#7.2.12.">7.2.12. Request: Modify, Content: MD+BR, Resource: *</a></li>
<li><a href="#7.2.13.">7.2.13. Request: Modify, Content: Binary File, Resource: *</a></li>
<li><a href="#7.2.14.">7.2.14. Request: Modify, Content: Packaged Content, Resource: *</a></li>
<li><a href="#7.2.15.">7.2.15. Request: Modify, Content: Empty Body, Resource: *</a></li>
<li><a href="#7.2.16.">7.2.16. Request: Create, Content: *, Resource: Service-URL</a></li>
<li><a href="#7.2.17.">7.2.17. Request: Create, Content: Body, Resource: Service-URL</a></li>
<li><a href="#7.2.18.">7.2.18. Request: Create, Content: Empty Body, Resource: Service-URL</a></li>
<li><a href="#7.2.19.">7.2.19. Request: Update, Content: *, Resource: *</a></li>
<li><a href="#7.2.20.">7.2.20. Request: Delete, Content: *, Resource: *</a></li>
<li><a href="#7.2.21.">7.2.21. Request: Update, Content: Body, Resource: *</a></li>
<li><a href="#7.2.22.">7.2.22. Request: Update, Content: Body, Resource: Object-URL</a></li>
<li><a href="#7.2.23.">7.2.23. Request: Update, Content: Empty Body, Resource: Object-URL</a></li>
<li><a href="#7.2.24.">7.2.24. Request: Append, Content: *, Resource: Object-URL</a></li>
<li><a href="#7.2.25.">7.2.25. Request: Append, Content: Binary, Resource: Object-URL</a></li>
<li><a href="#7.2.26.">7.2.26. Request: Append, Content: Empty Body, Resource: Object-URL</a></li>
<li><a href="#7.2.27.">7.2.27. Request: Replace, Content: *, Resource: Object-URL</a></li>
<li><a href="#7.2.28.">7.2.28. Request: Update, Content: Body, Resource: Components</a></li>
<li><a href="#7.2.29.">7.2.29. Request: Update, Content: Empty Body, Resource: Components</a></li>
<li><a href="#7.2.30.">7.2.30. Request: Replace, Content: *, Resource: Metadata-URL</a></li>
<li><a href="#7.2.31.">7.2.31. Request: Replace, Content: *, Resource: FileSet-URL</a></li>
<li><a href="#7.2.32.">7.2.32. Request: Replace, Content: *, Resource: File-URL</a></li>
<li><a href="#7.2.33.">7.2.33. Request: Delete, Content: *, Resource: Object-URL</a></li>
<li><a href="#7.2.34.">7.2.34. Request: Delete, Content: *, Resource: FileSet-URL</a></li>
<li><a href="#7.2.35.">7.2.35. Request: Delete, Content: *, Resource: File-URL</a></li>
<li><a href="#7.2.36.">7.2.36. Request: Delete, Content: *, Resource: Metadata-URL</a></li>
<li><a href="#7.2.37.">7.2.37. Request: Complete, Content: Empty Body, Resource: Object-URL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#8.">8. Documents</a><ul>
<li><a href="#8.1.">8.1. JSON-LD Context</a></li>
<li><a href="#8.2.">8.2. Service Document</a></li>
<li><a href="#8.3.">8.3. Metadata Document</a></li>
<li><a href="#8.4.">8.4. By-Reference Document</a></li>
<li><a href="#8.5.">8.5. Metadata + By-Reference Document</a></li>
<li><a href="#8.6.">8.6. Status Document</a><ul>
<li><a href="#8.6.1.">8.6.1. Available <code>rel</code> types and their meanings</a></li>
<li><a href="#8.6.2.">8.6.2. Required SWORD State Information</a></li>
<li><a href="#8.6.3.">8.6.3. Ingest Statuses for Individual Files</a></li>
</ul>
</li>
<li><a href="#8.7.">8.7. Error Document</a><ul>
<li><a href="#8.7.1.">8.7.1. Error Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#9.">9. Content Disposition</a><ul>
<li><a href="#9.1.">9.1. Direct Uploads:</a></li>
<li><a href="#9.2.">9.2. Segment Upload Initialisation:</a></li>
<li><a href="#9.3.">9.3. Segment Upload:</a></li>
</ul>
</li>
<li><a href="#10.">10. Content Digests</a><ul>
<li><a href="#10.1.">10.1. Announcing Support For Digests</a></li>
<li><a href="#10.2.">10.2. Transmitting Digests</a></li>
</ul>
</li>
<li><a href="#11.">11. Continued Deposit</a><ul>
<li><a href="#11.1.">11.1. Deposit Complete</a></li>
<li><a href="#11.2.">11.2. Deposit Incomplete</a></li>
<li><a href="#11.3.">11.3. Completing a Previously Incomplete Deposit</a></li>
</ul>
</li>
<li><a href="#12.">12. References</a>
</div></li>
</ul>
<p></div></p>
<p><div class=spec>
Last modified: 2018-04-20
<a name="1."></a></p>
<h1>1. Credits</h1>
<p>Technical Lead: Richard Jones, Cottage Labs</p>
<p>Community Lead: Neil Jefferies, University of Oxford</p>
<p>Funder Liaison: Dom Fripp, Jisc</p>
<p><a name="2."></a></p>
<h1>2. Introduction</h1>
<p>The first major version of SWORD [<a href="#sword_1.3">SWORD 1.3</a>] built upon the Resouce creation aspects of AtomPub [<a href="#atompub">AtomPub</a>] to enable fire-and-forget package 
deposit onto a server.</p>
<p>This approach, where the depositor has no further interaction with the server is of significant value in certain use cases, but there are 
others where this is insufficient. Consider, for example, that the depositor wishes to construct a digital artifact file by file over a 
period of time before deciding that it is time to archive it. In these cases, a higher level of interactivity between the participating 
systems is required, and this is the role that SWORD 2.0 [<a href="#sword_2.0">SWORD 2.0</a>] was subsequently developed to fulfil.</p>
<p>As the use cases for SWORD have developed further, it became clear that the increasing size of files repositories were being asked to deal
with was an issue.  As a result of this, and the fact that the technological approach for SWORD 2.0 was starting to show its age, a new
version, SWORD 3.0, has been developed.  This is a radical departure from SWORD 2.0, eliminating ties with AtomPub, and moving to a much
stricter REST+JSON approach, utilising JSON-LD for alignment with Linked Data.  Its key differences to SWORD 2.0 from a functional
perspective are:</p>
<ul>
<li>Support for By-Reference file deposit</li>
<li>Support for Segmented file deposit</li>
<li>More advanced native packaging and metadata formats</li>
</ul>
<p>...TODO...</p>
<p><a name="3."></a></p>
<h1>3. Notational Conventions</h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
document are to be interpreted as described in [<a href="#rfc2119">RFC2119</a>].</p>
<p><a name="4."></a></p>
<h1>4. Terminology</h1>
<p><a name="4.1."></a></p>
<h2>4.1. URLs</h2>
<dl><dt><a name="service-url">Service-URL</dt><dd>The location of the document which describes the server's capabilities for the user, and which may accept initial deposits</dd><dt><a name="object-url">Object-URL</dt><dd>An Object that exists on the server, probably as a result of a deposit operation, which is a container for Metadata and zero or more Files.</dd><dt><a name="metadata-url">Metadata-URL</dt><dd>The metadata resource associated with the Object</dd><dt><a name="fileset-url">FileSet-URL</dt><dd>The aggregate of all Binary Files associated with the Object</dd><dt><a name="file-url">File-URL</dt><dd>A single binary file within the FileSet of the Object</dd></dl>

<p><a name="4.2."></a></p>
<h2>4.2. Document Types</h2>
<dl><dt><a name="service_document">Service Document</dt><dd>Describes the capabilities of the server with respect to the user</dd><dt><a name="metadata">Metadata</dt><dd>A format for depositing and retrieving object metadata</dd><dt><a name="by-reference">By-Reference</dt><dd>A format for describing one or more files to be deposited by-reference.</dd><dt><a name="metadata+by-reference">Metadata+By-Reference</dt><dd>A single expression of both the Metadata and the By-Reference file deposits.</dd><dt><a name="status">Status</dt><dd>A document describing the current status of the object and its content</dd><dt><a name="binary_file">Binary File</dt><dd>An opaque binary file</dd><dt><a name="packaged_content">Packaged Content</dt><dd>A serialisation of the entire Object, consisting of its Metadata and Binary Files.</dd><dt><a name="error">Error</dt><dd>Describes an error that occurred while processing a request.</dd></dl>

<p><a name="4.3."></a></p>
<h2>4.3. Namespaces</h2>
<dl><dt><a name="http://purl.org/net/sword/3.0/"><a href="http://purl.org/net/sword/3.0/">http://purl.org/net/sword/3.0/</a></dt><dd>All SWORDv3 extensions are defined within this namespace.  This Namespace also serves to identify the SWORD version for a given Service.</dd><dt><a name="http://purl.org/net/sword/3.0/terms/"><a href="http://purl.org/net/sword/3.0/terms/">http://purl.org/net/sword/3.0/terms/</a></dt><dd>All predicates associated with SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/package/"><a href="http://purl.org/net/sword/3.0/package/">http://purl.org/net/sword/3.0/package/</a></dt><dd>All packaged formats defined by SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/error/"><a href="http://purl.org/net/sword/3.0/error/">http://purl.org/net/sword/3.0/error/</a></dt><dd>All error documents defined by SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/state/"><a href="http://purl.org/net/sword/3.0/state/">http://purl.org/net/sword/3.0/state/</a></dt><dd>Terms used to describe the state of Objects in SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/types/"><a href="http://purl.org/net/sword/3.0/types/">http://purl.org/net/sword/3.0/types/</a></dt><dd>Namespace for all document types used in SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/filestate/"><a href="http://purl.org/net/sword/3.0/filestate/">http://purl.org/net/sword/3.0/filestate/</a></dt><dd>Terms used to descript he state of Files in SWORDv3</dd><dt><a name="http://purl.org/net/sword/3.0/discovery/"><a href="http://purl.org/net/sword/3.0/discovery/">http://purl.org/net/sword/3.0/discovery/</a></dt><dd>Terms used for auto-discovery of SWORDv3 services</dd><dt><a name="http://purl.org/dc/elements/1.1/"><a href="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</a></dt><dd>The Simple Dublin Core elements.  This document uses the prefix <code>dc</code> for this namespace name; for example <code>dc:title</code></dd><dt><a name="http://purl.org/dc/terms/"><a href="http://purl.org/dc/terms/">http://purl.org/dc/terms/</a></dt><dd>The Extended Dublin Core terms. This document uses the prefix <code>dcterms</code> for the namespace name; for example <code>dcterms:abstract</code></dd></dl>

<p><a name="5."></a></p>
<h1>5. HTTP Headers</h1>
<p>These are the HTTP headers used by SWORD, and their meanings within the context of the protocol.  Where a Default Value is specified, this 
is what value the client or server MUST take the value to be if it is not provided explicitly in a request or response.</p>
<p><div class=http_headers></p>
<table>
<thead>
<tr>
<th>Header</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Authorization</td>
<td>To pass any HTTP authorization headers, such as the content for basic auth</td>
</tr>
<tr>
<td>Content-Disposition</td>
<td>Used to transmit information to the server which tells it the nature of the deposit, and any associated parameters</td>
</tr>
<tr>
<td>Content-Length</td>
<td>Length of the depositing content</td>
</tr>
<tr>
<td>Content-Type</td>
<td>Mimetype of the content being delivered</td>
</tr>
<tr>
<td>Digest</td>
<td>Checksum for the depositing content. MUST include SHA-256, and allows for other formats such as MD5 and SHA (SHA-1) if still needed by the server.</td>
</tr>
<tr>
<td>ETag</td>
<td>Object version identifier, as provided by the server on GET requests and any requests which modify the object and return.</td>
</tr>
<tr>
<td>If-Match</td>
<td>Used to provider the server’s Object version identifier (ETag) for the version on which this request is intended to act. If the supplied ETag does not match, this means that the version on the server has changed since the client’s last operation, the server MUST reject the update. The client will need to retrieve the latest ETag and re-issue the request, taking into account any changes.</td>
</tr>
<tr>
<td>In-Progress</td>
<td>Whether this operation is part of a larger deposit operation, and the server should expect subsequent related requests before injecting the item into any ingest workflows.<br><br>Default Value: false</td>
</tr>
<tr>
<td>Location</td>
<td>URI for the location where the requested or deposited content can be found</td>
</tr>
<tr>
<td>On-Behalf-Of</td>
<td>Username of any user the action is being carried out on behalf of</td>
</tr>
<tr>
<td>Packaging</td>
<td>URI unambiguously identifying the packaging profile<br><br>Default Value: http://purl.org/net/sword/3.0/package/Binary</td>
</tr>
<tr>
<td>Slug</td>
<td>Suggested identifier for the item</td>
</tr>
<tr>
<td>Metadata-Format</td>
<td>URI unambiguously identifying the metadata format/schema/profile<br><br>Default Value: http://purl.org/net/sword/3.0/types/Metadata</td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6."></a></p>
<h1>6. Protocol Operations</h1>
<p>This section lists the actual on-the-wire protocol operations that are part of SWORDv3.  Actual usage of each of these operations is 
dependent on the action that you wish to take.  See [Protocol Behaviours] for the rules which govern how to use these Protocol Operations.</p>
<p>The full set of protocol operations is available as an OpenAPI definition [<a href="#openapi">OpenAPI</a>], available as <a href="https://swordapp.github.io/swordv3/openapi.json">JSON</a>
and <a href="https://swordapp.github.io/swordv3/openapi.yaml">YAML</a>.</p>
<p><a name="6.1."></a></p>
<h2>6.1. Error Responses</h2>
<p>The following error responses are possible against some or all of the HTTP Requests.  In each case an Error Document MUST be returned by the 
server with details as to the root cause of the error.</p>
<ul>
<li><strong>400 (BadRequest)</strong> - The server could not understand your request.  Either your headers or content body are wrong or malformed.</li>
<li><strong>401 (Unauthorized)</strong> - You have not provided authentication information, please do so</li>
<li><strong>403 (Forbidden)</strong> - You are not authorised to access this resource</li>
<li><strong>404 (Not Found)</strong> - There is no resource available at the URL you requested</li>
<li><strong>405 (Method Not Allowed)</strong> - The HTTP method you requested on the resource is not permitted/available in this context</li>
<li><strong>412 (Precondition Failed)</strong> - There is a problem implementing the request as-is.  This can happen for the following reasons: your checksums may not match, you may have requested mediated deposit when the server does not support that, your headers may not be consistent with each other, your If-Match headers may not mat the current ETag, or your Segmented Upload Initialisation request may not be within parameters acceptable to the server.</li>
<li><strong>413 (Payload Too Large)</strong> - Your request body exceeds the size allowed by the server</li>
<li><strong>415 (Unsupported Media Type)</strong> - The metadata format is not the same as that identified in Metadata-Format and/or it is not supported by the server, or the packaging format is not the same as that identified in Packaging and/or it is not supported by the server</li>
</ul>
<p><a name="6.2."></a></p>
<h2>6.2. Redirects</h2>
<p>Some requests may result in redirect codes being sent to the client; the server MAY respond to any request with a suitable redirect.  These 
are the redirect codes that are used, and what they mean:</p>
<ul>
<li><strong>301 (Moved Permanently)</strong> - The URL you requested has changed, re-send this request and all future requests to the new URL</li>
<li><strong>307 (Temporary Redirect)</strong> - The URL you requested has temporarily changed, re-send this request to the new URL</li>
<li><strong>308 (Permanent Redirect)</strong> - The URL you requested has changed, re-send this request and all future requests to the new URL</li>
</ul>
<p><a name="6.3."></a></p>
<h2>6.3. HTTP Requests</h2>
<p>These are the HTTP requests that are covered by the SWORD protocol.  Each one is listed on the left with the HTTP method, the URL against 
which it can be executed, and any headers that are permitted (requirements for headers are covered in later sections), as well as a list of 
possible Body contents.  On the right is the set of possible successful responses from the server, with the HTTP status code, any headers 
that may be included, and the Body content.</p>
<p>Each request MAY be responded to by the server with a redirect code (see above).  Each request MAY also generate an error; possible errors 
are listed for each section, please refer to the section above for details on the meanings of errors.</p>
<p><a name="6.3.1."></a></p>
<h3>6.3.1. GET Service-URL</h3>
<p><div class=openapi>
Retrieve the Service Document</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>on-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Service Document<br><br><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.2."></a></p>
<h3>6.3.2. POST Service-URL</h3>
<p><div class=openapi>
Make a new Object</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>In-Progress</li>
<li>Metadata-Format</li>
<li>On-Behalf-Of</li>
<li>Packaging</li>
<li>Slug</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>201</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li><li>Location - Object-URL</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>202</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li><li>Location - Object-URL</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
<tr>
<td>415</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.3."></a></p>
<h3>6.3.3. GET Object-URL</h3>
<p><div class=openapi>
Retrieve the Status information for the Object</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>on-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Status Document<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.4."></a></p>
<h3>6.3.4. POST Object-URL</h3>
<p><div class=openapi>
Append data to an Object</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>If-Match</li>
<li>In-Progress</li>
<li>On-Behalf-Of</li>
<li>Packaging</li>
<li>Metadata-Format</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li><li>Location - The File-URL or Segment-URL, whichever is appropriate</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>202</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li><li>Location - The File-URL or Segment-URL, whichever is appropriate</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
<tr>
<td>415</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.5."></a></p>
<h3>6.3.5. PUT Object-URL</h3>
<p><div class=openapi>
Replace the Object</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>If-Match</li>
<li>In-Progress</li>
<li>On-Behalf-Of</li>
<li>Packaging</li>
<li>Metadata-Format</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>202</td>
<td>Status<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
<tr>
<td>415</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.6."></a></p>
<h3>6.3.6. DELETE Object-URL</h3>
<p><div class=openapi>
Delete the Object</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>204</td>
<td>Object Deleted<br><br><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.7."></a></p>
<h3>6.3.7. GET Metadata-URL</h3>
<p><div class=openapi>
Retrieve the Metadata</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>on-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Metadata<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>application/json</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.8."></a></p>
<h3>6.3.8. PUT Metadata-URL</h3>
<p><div class=openapi>
Replace the Metadata</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
<li>Metadata-Format</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>204</td>
<td>No Content<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
<tr>
<td>415</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.9."></a></p>
<h3>6.3.9. PUT FileSet-URL</h3>
<p><div class=openapi>
Replace the FileSet</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
<li>Packaging</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>202</td>
<td>No Content<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>204</td>
<td>No Content<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.10."></a></p>
<h3>6.3.10. DELETE FileSet-URL</h3>
<p><div class=openapi>
Delete the FileSet</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>204</td>
<td>FileSet Deleted<br><br><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.11."></a></p>
<h3>6.3.11. GET File-URL</h3>
<p><div class=openapi>
Retrieve an individual File</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>on-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Binary File<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li><em>/</em></li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.12."></a></p>
<h3>6.3.12. PUT File-URL</h3>
<p><div class=openapi>
Replace an individual File</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>Content-Disposition</li>
<li>Content-Length</li>
<li>Content-Type</li>
<li>Digest</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>204</td>
<td>No Content<br><br><strong>Headers</strong><ul><li>ETag - version identifier</li></ul><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
<tr>
<td>413</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="6.3.13."></a></p>
<h3>6.3.13. DELETE File-URL</h3>
<p><div class=openapi>
Delete an individual File</p>
<p><strong>Headers</strong></p>
<ul>
<li>Authorization</li>
<li>If-Match</li>
<li>On-Behalf-Of</li>
</ul>
<p><strong>Responses</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>204</td>
<td>File Deleted<br><br><strong>Body</strong><ul><li>None</li></ul></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
<tr>
<td>401</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td></td>
</tr>
<tr>
<td>404</td>
<td></td>
</tr>
<tr>
<td>405</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td></td>
</tr>
</tbody>
</table>
<p></div></p>
<p><a name="7."></a></p>
<h1>7. Protocol Requirements</h1>
<p>This section describes the requirements of every kind of operation that you can do with SWORDv3.</p>
<p>There are 3 key aspects of the specification where requirements can be applied, and these are:</p>
<ol>
<li><strong>Request</strong>: The CRUD operations that you can perform on the resources</li>
<li><strong>Content</strong>: The body content of the request, such as Metadata, By-Reference, Metadata+ByReference, Binary File, Packaged Content, Empty Body</li>
<li><strong>Resource</strong>: Service-URL<sup>[<a href="#service-url">def</a>]</sup>, Object-URL<sup>[<a href="#object-url">def</a>]</sup>, Metadata-URL<sup>[<a href="#metadata-url">def</a>]</sup>, FileSet-URL<sup>[<a href="#fileset-url">def</a>]</sup>, File-URL<sup>[<a href="#file-url">def</a>]</sup></li>
</ol>
<p>When combined for a specific request.  For example: Creating (<strong>Request</strong>) a new Object by request to the Service-URL (<strong>Resource</strong>) 
with Packaged Content (<strong>Content</strong>), these aspects tell you the exact requirements.</p>
<p>The requirements below are presented using a hierarchy; for any given combination of <strong>Request</strong>, <strong>Content</strong> and <strong>Resource</strong>
all requirements above the relevant node should be imported when considering the actual requirements for an operation.  See the document
<a href="https://swordapp.github.io/swordv3/swordv3-behaviours.html">SWORDv3 Behaviours</a> to see each of the behaviours SWORDv3 is capable of with its requirements fully 
expanded.</p>
<p><a name="7.1."></a></p>
<h2>7.1. Requirement Hierarchies</h2>
<p>The hierarchy for the Request is:</p>
<ul>
<li>*<ul>
<li>Modify<ul>
<li>Create</li>
<li>Update<ul>
<li>Append</li>
<li>Replace</li>
</ul>
</li>
</ul>
</li>
<li>Retrieve</li>
<li>Complete</li>
<li>Delete</li>
</ul>
</li>
</ul>
<p>The hierarchy for the Content is:</p>
<ul>
<li>*<ul>
<li>Body<ul>
<li>Binary<ul>
<li>Binary File</li>
<li>Packaged Content</li>
</ul>
</li>
<li>JSON<ul>
<li>MD+BR</li>
<li>By-Reference</li>
<li>Metadata</li>
</ul>
</li>
</ul>
</li>
<li>Empty Body</li>
</ul>
</li>
</ul>
<p>The hierarchy for the Resource is:</p>
<ul>
<li>*<ul>
<li>Service-URL</li>
<li>Components<ul>
<li>FileSet-URL</li>
<li>File-URL</li>
<li>Metadata-URL</li>
</ul>
</li>
<li>Object-URL</li>
</ul>
</li>
</ul>
<p>So, for example, when considering an operation such as "Creating Objects with Packaged Content", this would be take requirements as follows:</p>
<ul>
<li>For the Request, as a Create, it takes requirements from <strong>Create</strong>, <strong>Modify</strong> and <strong>*</strong></li>
<li>For the Content, as Packaged Content, it takes requirements from <strong>Packaged Content</strong>, <strong>Binary</strong>, <strong>Body</strong> and <strong>*</strong></li>
<li>For the Resource, as an operation on the Service-URL, it takes requirements from <strong>Service-URL</strong> and <strong>*</strong></li>
</ul>
<p><a name="7.2."></a></p>
<h2>7.2. Requirement Groups</h2>
<p><a name="7.2.1."></a></p>
<h3>7.2.1. Request: *, Content: *, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY specify <code>Authorization</code> and <code>On-Behalf-Of</code> headers (i.e. if authenticating this request)</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If <code>Authorization</code> (and optionally <code>On-Behalf-Of</code>) headers are provided, MUST authenticate the request</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>If authentication fails, MUST respond with a <code>403</code></li>
</ul>
<p><a name="7.2.2."></a></p>
<h3>7.2.2. Request: Retrieve, Content: *, Resource: Service-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>GET Service-URL</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>If <code>Authorization</code> (and optionally <code>On-Behalf-Of</code>) headers are provided, MUST only list Service-URLs in the Service Document for which a deposit request would be permitted</li>
<li>MUST respond with a valid Service Document or a suitable error response</li>
</ul>
<p><a name="7.2.3."></a></p>
<h3>7.2.3. Request: Retrieve, Content: *, Resource: Object-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>GET Object-URL</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a valid Status document or a suitable error response</li>
<li>MUST include <code>ETag</code> header if implementing concurrency control</li>
</ul>
<p><a name="7.2.4."></a></p>
<h3>7.2.4. Request: Retrieve, Content: *, Resource: Components</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST include <code>ETag</code> header if implementing concurrency control</li>
</ul>
<p><a name="7.2.5."></a></p>
<h3>7.2.5. Request: Retrieve, Content: *, Resource: Metadata-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>GET Metadata-URL</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a valid Metadata document (see definition below) or a suitable error response</li>
</ul>
<p><a name="7.2.6."></a></p>
<h3>7.2.6. Request: Retrieve, Content: *, Resource: File-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>GET File-URL</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a File (which may be Packaged Content, a Binary File, a Metadata document, or any other file that the server exposes) or a suitable error response</li>
</ul>
<p><a name="7.2.7."></a></p>
<h3>7.2.7. Request: Modify, Content: *, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the <code>Content-Disposition</code> header, with the appropriate value for the request</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST include <code>ETag</code> header if implementing concurrency control</li>
</ul>
<p><a name="7.2.8."></a></p>
<h3>7.2.8. Request: Modify, Content: Body, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the <code>Content-Type</code> and <code>Digest</code> headers</li>
<li>SHOULD provide the <code>Content-Length</code></li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If all preconditions are met, MUST either accept the deposit request immediately, queue the request for processing, or respond with an error</li>
<li>MUST verify that the content matches the <code>Digest</code> header</li>
<li>MUST verify that the supplied content matches the <code>Content-Length</code> if this is provided</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST include one or more File-URLs for the deposited content in the Status document.  The behaviour of these File-URLs may vary depending on the type of content deposited (e.g. ByReference and Segmented Uploads do not need to be immediately retrievable)</li>
</ul>
<p><a name="7.2.9."></a></p>
<h3>7.2.9. Request: Modify, Content: Metadata, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>SHOULD provide the <code>Metadata-Format</code> header</li>
<li>MUST provide only the Metadata document</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>Metadata-Format</code> header is provided, MUST assume this is the standard SWORD format: http://purl.org/net/sword/3.0/types/Metadata</li>
</ul>
<p><a name="7.2.10."></a></p>
<h3>7.2.10. Request: Modify, Content: By-Reference, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the By-Reference document</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If downloading copies of the files in the By-Reference document, MUST do this asynchronously to the deposit request</li>
</ul>
<p><a name="7.2.11."></a></p>
<h3>7.2.11. Request: Modify, Content: By-Reference, Resource: File-URL</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST only include a single By-Reference File in the By-Reference document</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If more than one By-Reference File is present, MUST reject the request.</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>If rejecting the request due to the presence of more than one By-Reference File in the By-Reference Document, MUST respond with a <code>400</code></li>
</ul>
<p><a name="7.2.12."></a></p>
<h3>7.2.12. Request: Modify, Content: MD+BR, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>SHOULD provide the <code>Metadata-Format</code> header</li>
<li>MUST provide the Metadata+By Reference document</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>Metadata-Format</code> header is provided, MUST assume this is the standard SWORD format: http://purl.org/net/sword/3.0/types/Metadata</li>
<li>If downloading copies of the files in the By-Reference document, MUST do this asynchronously to the deposit request</li>
</ul>
<p><a name="7.2.13."></a></p>
<h3>7.2.13. Request: Modify, Content: Binary File, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY provide the <code>Packaging</code> header, and if so MUST be the Binary format identifier</li>
<li>MUST provide Binary File body content</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>The server SHOULD NOT attempt to unpack the file</li>
</ul>
<p><a name="7.2.14."></a></p>
<h3>7.2.14. Request: Modify, Content: Packaged Content, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the <code>Packaging</code> header</li>
<li>MUST provide Packaged Content in the request body</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>The server MAY attempt to unpack the file</li>
</ul>
<p><a name="7.2.15."></a></p>
<h3>7.2.15. Request: Modify, Content: Empty Body, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY provide the <code>Content-Length</code> header with value <code>0</code></li>
<li>MUST NOT include any body content</li>
</ul>
<p><a name="7.2.16."></a></p>
<h3>7.2.16. Request: Create, Content: *, Resource: Service-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>POST Service-URL</li>
</ul>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY provide the <code>Slug</code> header</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If a <code>Slug</code> header is provided, MAY use this as the identifier for the newly created Object.</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>Location</code> header, containing the Object-URL</li>
<li>MUST respond with a valid Status document or a suitable error response</li>
<li>Status document MUST be available on GET to the Object-URL in the <code>Location</code> header immediately (irrespective of whether this is a <code>201</code> or <code>202</code> response)</li>
<li>MUST respond with a <code>201</code> if the item was created immediately, a <code>202</code> if the item was queued for import, or raise an error.</li>
</ul>
<p><a name="7.2.17."></a></p>
<h3>7.2.17. Request: Create, Content: Body, Resource: Service-URL</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY provide the <code>In-Progress</code> header</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST assume that it is <code>false</code></li>
<li>If <code>In-Progress</code> is <code>false</code>, SHOULD expect further updates to the item, and not progress it through any ingest workflows yet.</li>
</ul>
<p><a name="7.2.18."></a></p>
<h3>7.2.18. Request: Create, Content: Empty Body, Resource: Service-URL</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the <code>In-Progress</code> header with value <code>true</code></li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST NOT accept the request</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST respond with a <code>412</code> error</li>
<li>MUST reject the request if the conditions of the upload are not acceptable</li>
</ul>
<p><a name="7.2.19."></a></p>
<h3>7.2.19. Request: Update, Content: *, Resource: *</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST include the <code>If-Match</code> header, if the server implements concurrency control</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>MUST reject the request if the <code>If-Match</code> header does not match the current <code>ETag</code> of the resource</li>
</ul>
<p><a name="7.2.20."></a></p>
<h3>7.2.20. Request: Delete, Content: *, Resource: *</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>204</code> if the delete is successful, or raise an error</li>
</ul>
<p><a name="7.2.21."></a></p>
<h3>7.2.21. Request: Update, Content: Body, Resource: *</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>200</code> if the request was accepted immediately, a <code>202</code> if the request was queued for processing, or raise an error.</li>
</ul>
<p><a name="7.2.22."></a></p>
<h3>7.2.22. Request: Update, Content: Body, Resource: Object-URL</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MAY provide the <code>In-Progress</code> header</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST assume that it is <code>false</code></li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a valid Status document or a suitable error response</li>
<li>MUST include <code>ETag</code> header if implementing concurrency control</li>
</ul>
<p><a name="7.2.23."></a></p>
<h3>7.2.23. Request: Update, Content: Empty Body, Resource: Object-URL</h3>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the <code>In-Progress</code> header with value <code>true</code></li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST NOT accept the request</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>If no <code>In-Progress</code> header is provided, MUST respond with a <code>412</code> error</li>
<li>MUST respond with a valid Status document or a suitable error response</li>
<li>MUST include <code>ETag</code> header if implementing concurrency control</li>
<li>MUST respond with a <code>201</code> to indicate that the Segmented Upload has been initialised, or raise an error.</li>
</ul>
<p><a name="7.2.24."></a></p>
<h3>7.2.24. Request: Append, Content: *, Resource: Object-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>POST Object-URL</li>
</ul>
<p><a name="7.2.25."></a></p>
<h3>7.2.25. Request: Append, Content: Binary, Resource: Object-URL</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>Location</code> header, containing the File-URL of the Original Deposit File</li>
</ul>
<p><a name="7.2.26."></a></p>
<h3>7.2.26. Request: Append, Content: Empty Body, Resource: Object-URL</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>Location</code> header, containing the Segment-URL</li>
</ul>
<p><a name="7.2.27."></a></p>
<h3>7.2.27. Request: Replace, Content: *, Resource: Object-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>PUT Object-URL</li>
</ul>
<p><a name="7.2.28."></a></p>
<h3>7.2.28. Request: Update, Content: Body, Resource: Components</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>204</code> if the replacement was deposited immediately, a <code>202</code> if the replacement was queued for import, or raise an error.</li>
</ul>
<p><a name="7.2.29."></a></p>
<h3>7.2.29. Request: Update, Content: Empty Body, Resource: Components</h3>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>201</code> to indicate that the Segmented Upload has been initialised, or raise an error.</li>
</ul>
<p><a name="7.2.30."></a></p>
<h3>7.2.30. Request: Replace, Content: *, Resource: Metadata-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>PUT Metadata-URL</li>
</ul>
<p><a name="7.2.31."></a></p>
<h3>7.2.31. Request: Replace, Content: *, Resource: FileSet-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>PUT FileSet-URL</li>
</ul>
<p><a name="7.2.32."></a></p>
<h3>7.2.32. Request: Replace, Content: *, Resource: File-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>PUT File-URL</li>
</ul>
<p><a name="7.2.33."></a></p>
<h3>7.2.33. Request: Delete, Content: *, Resource: Object-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>DELETE Object-URL</li>
</ul>
<p><a name="7.2.34."></a></p>
<h3>7.2.34. Request: Delete, Content: *, Resource: FileSet-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>DELETE FileSet-URL</li>
</ul>
<p><a name="7.2.35."></a></p>
<h3>7.2.35. Request: Delete, Content: *, Resource: File-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>DELETE File-URL</li>
</ul>
<p><a name="7.2.36."></a></p>
<h3>7.2.36. Request: Delete, Content: *, Resource: Metadata-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>DELETE Metadata-URL</li>
</ul>
<p><a name="7.2.37."></a></p>
<h3>7.2.37. Request: Complete, Content: Empty Body, Resource: Object-URL</h3>
<p><strong>Protocol Operation</strong></p>
<ul>
<li>POST Object-URL</li>
</ul>
<p><strong>Request Requirements</strong></p>
<ul>
<li>MUST provide the header <code>In-Progress: false</code></li>
<li>MAY provide the <code>Content-Length</code> header with value <code>0</code></li>
<li>MUST NOT include any body content</li>
</ul>
<p><strong>Server Requirements</strong></p>
<ul>
<li>MAY inject the content into any ingest workflows</li>
</ul>
<p><strong>Response Requirements</strong></p>
<ul>
<li>MUST respond with a <code>204</code> or a suitable error</li>
</ul>
<p><a name="8."></a></p>
<h1>8. Documents</h1>
<p><a name="8.1."></a></p>
<h2>8.1. JSON-LD Context</h2>
<p>SWORD defines the semantics of its documents using JSON-LD [<a href="#json-ld">JSON-LD</a>].  You can see the full JSON-LD Context 
<a href="https://swordapp.github.io/swordv3/swordv3.jsonld">here</a></p>
<p><a name="8.2."></a></p>
<h2>8.2. Service Document</h2>
<p>The Service Document defines the capabilities and operational parameters of the server as a whole, or of a particular Service-URL.</p>
<p>The Service Document consists of a set of properties at the root, and a list of "services".  Each service may define a Service-URL 
and/or additional properties and further nested "services".  For the purposes of normalising the data held in the Service Document (for 
brevity of the serialised document), the Service Document MAY specify at the root properties which MUST be taken to hold true for all 
nested "services" (at any level below) unless that service definition overrides the properties.  A service which sits beneath the root of 
the Service Document and above another Service, MAY also redefine properties, and those overrides MUST be considered to cascade down to 
Services beneath that one.</p>
<p>A Service Document can be retrieved either for the root of the service, or from any Service within the hierarchy of Services available. 
If the root Service Document is requested, the full list of Services, including all their children, MUST be provided.  If the URL of a 
Service is requested, it MUST only provide information about itself and its children.</p>
<p>The full JSON Schema [<a href="#json-schema">JSON-SCHEMA</a>] can be downloaded <a href="https://swordapp.github.io/swordv3/service-document.schema.json">here</a>.</p>
<p>An example of the Service Document:</p>
<pre><code class="json">{
  &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,

  &quot;@id&quot; : &quot;http://example.com/service-document&quot;,
  &quot;@type&quot; : &quot;ServiceDocument&quot;,

  &quot;dc:title&quot; : &quot;Site Name&quot;,
  &quot;dcterms:abstract&quot; : &quot;Site Description&quot;,

  &quot;root&quot; : &quot;http://example.com/service-document&quot;,
  &quot;acceptDeposits&quot;: true,

  &quot;version&quot;: &quot;http://purl.org/net/sword/3.0&quot;,
  &quot;maxUploadSize&quot; : 16777216,
  &quot;maxByReferenceSize&quot; : 30000000000000000,

  &quot;accept&quot; : [&quot;*/*&quot;],
  &quot;acceptPackaging&quot; : [&quot;*&quot;],
  &quot;acceptMetadata&quot; : [&quot;*&quot;],

  &quot;collectionPolicy&quot; : {
    &quot;@id&quot; : &quot;http://www.myorg.ac.uk/collectionpolicy&quot;,
    &quot;description&quot; : &quot;....&quot;
  },
  &quot;treatment&quot; : {
    &quot;@id&quot; : &quot;http://www.myorg.ac.uk/treatment&quot;,
    &quot;description&quot; : &quot;...&quot;
  },

  &quot;byReferenceDeposit&quot; : true,
  &quot;segmentedUpload&quot; : true,
  &quot;unfinishedSegmentRetention&quot; : 3600,
  &quot;onBehalfOf&quot; : true,
  &quot;concurrencyControl&quot; : true,

  &quot;digest&quot; : [&quot;SHA-256&quot;, &quot;SHA&quot;, &quot;MD5&quot;],
  &quot;authentication&quot;: [&quot;Basic&quot;, &quot;...&quot;],

  &quot;services&quot; : [
    {
      &quot;@id&quot;: &quot;http://swordapp.org/deposit/43&quot;,

      &quot;dc:title&quot; : &quot;Deposit Service Name&quot;,
      &quot;dcterms:abstract&quot; : &quot;Deposit Service Description&quot;,

      &quot;root&quot; : &quot;http://example.com/service-document&quot;,
      &quot;parent&quot; : &quot;http://example.com/service-document&quot;,
      &quot;acceptDeposits&quot;: true,

      &quot;services&quot; : []
    }
  ]
}

</code></pre>

<p>The fields available are defined as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@context</td>
<td>string</td>
<td>The JSON-LD Context for this document<br><br>MUST be present.</td>
</tr>
<tr>
<td>@id</td>
<td>string</td>
<td>The URL of the service document you are looking at<br><br>MUST be present.</td>
</tr>
<tr>
<td>@type</td>
<td>string</td>
<td>JSON-LD identifier for the document type<br><br>This field is used to define the type of the document, and in this case should always be 'ServiceDocument'.  MUST be present.</td>
</tr>
<tr>
<td>accept</td>
<td>array</td>
<td>List of Content Types which are acceptable to the server.<br><br>MUST be present.  '<em>/</em>' for any content type, or a list of acceptable content types</td>
</tr>
<tr>
<td>acceptDeposits</td>
<td>boolean</td>
<td>Does the Service accept deposits?<br><br>SHOULD be present.  If omitted, the client MUST assume that the service does not accept deposits.</td>
</tr>
<tr>
<td>acceptMetadata</td>
<td>array</td>
<td>List of Metadata Formats which are acceptable to the server.<br><br>SHOULD be present.  '*' for any metadata format, or a list of acceptable metadata formats.  Acceptable metadata formats SHOULD be an IRI for a known format.  If this is omitted, the client MUST assume the server only supports the standard SWORD metadata format: http://purl.org/net/sword/3.0/types/Metadata</td>
</tr>
<tr>
<td>acceptPackaging</td>
<td>array</td>
<td>List of Packaging Formats which are acceptable to the server.<br><br>SHOULD be present.  '*' for any packaging format, or a list of acceptable packaging formats.  Acceptable packaging formats SHOULD be an IRI for a known format.  If this is omitted, the client MUST assume the server only supports the 3 required SWORD packaging formats (see the section Packaging Formats)</td>
</tr>
<tr>
<td>authentication</td>
<td>array</td>
<td>List of authentication schemes supported by the server.<br><br>SHOULD be present.  If not provided the client MUST assume the server does not support authentication.</td>
</tr>
<tr>
<td>byReferenceDeposit</td>
<td>boolean</td>
<td>Does the server support By-Reference deposit?<br><br>SHOULD be present.   If omitted, the client MUST assume the server does not support By-Reference deposit.</td>
</tr>
<tr>
<td>collectionPolicy</td>
<td>object</td>
<td>URL and description of the server’s collection policy.<br><br>MAY be present.</td>
</tr>
<tr>
<td>collectionPolicy.@id</td>
<td>string</td>
<td>Collection Policy URL</td>
</tr>
<tr>
<td>collectionPolicy.description</td>
<td>string</td>
<td>Collection Policy Description</td>
</tr>
<tr>
<td>concurrencyControl</td>
<td>boolean</td>
<td>Does the server enforce concurrency control?<br><br>SHOULD be present.  If concurrency control is enforced, the client MUST take note of the ETag and use the If-Match header in relevant requests. If omitted, the client MUST assume the server does not support Concurrency Control.</td>
</tr>
<tr>
<td>dc:title</td>
<td>string</td>
<td>The title or name of the Service<br><br>MUST be present.</td>
</tr>
<tr>
<td>dcterms:abstract</td>
<td>string</td>
<td>A description of the service<br><br>MAY be present.</td>
</tr>
<tr>
<td>digest</td>
<td>array</td>
<td>The list of digest formats that the server will accept.<br><br>MUST be present, and MUST include SHA-256, MAY include any others.</td>
</tr>
<tr>
<td>maxByReferenceSize</td>
<td>integer</td>
<td>Maximum size in kB as an integer for files uploaded by reference.<br><br>SHOULD be present.  If omitted, the client MUST assume the server will accept a file of any size.</td>
</tr>
<tr>
<td>maxUploadSize</td>
<td>integer</td>
<td>Maximum size in kB as an integer for files being uploaded.<br><br>SHOULD be present.  If omitted, the client MUST assume the server will accept an upload of any size.</td>
</tr>
<tr>
<td>onBehalfOf</td>
<td>boolean</td>
<td>Does the server support deposit on behalf of other users (mediation)<br><br>SHOULD be present.  If omitted, the client MUST assume the server does not support On-Behalf-Of deposit.</td>
</tr>
<tr>
<td>root</td>
<td>string</td>
<td>The URL for the root Service Document.<br><br>MUST be present.</td>
</tr>
<tr>
<td>segmentedUpload</td>
<td>boolean</td>
<td>Does the server support Segmented Upload?<br><br>SHOULD be present.  If omitted, the client MUST assume the server does not support Segmented Upload.</td>
</tr>
<tr>
<td>services</td>
<td>array</td>
<td>List of Services contained within the parent service<br><br>MAY be present.</td>
</tr>
<tr>
<td>treatment</td>
<td>object</td>
<td>URL and description of the treatment content can expect during deposit.<br><br>MAY be present.</td>
</tr>
<tr>
<td>treatment.@id</td>
<td>string</td>
<td>Treatment URL</td>
</tr>
<tr>
<td>treatment.description</td>
<td>string</td>
<td>Treatment Description</td>
</tr>
<tr>
<td>unfinishedSegmentRetention</td>
<td>integer</td>
<td>What is the minimum time a server will hold on to an incomplete Segmented Upload before deleting it.<br><br>SHOULD be present.  If omitted, the client MUST assume that the server will hold on to the incomplete file indefinitely.  Servers MAY delete the unfinished upload at any time after the minimum time stated here has elapsed.</td>
</tr>
<tr>
<td>version</td>
<td>string</td>
<td>The version of the SWORD protocol this server supports<br><br>MUST be present.</td>
</tr>
</tbody>
</table>
<p><a name="8.3."></a></p>
<h2>8.3. Metadata Document</h2>
<p>The default SWORD Metadata document allows the deposit of a standard, basic metadata document constructed using the DCMI terms.  This 
Metadata document can be sent when creating an Object initially, when appending to the metadata, or in replacing the metadata or indeed the 
Object as a whole.</p>
<p>The format of the document is simple and extensible (see the Metadata Formats section).  The “dc” and “dcterms” vocabularies are supported, 
and servers MUST support this metadata format.</p>
<p>The full JSON Schema [<a href="#json-schema">JSON-SCHEMA</a>] can be downloaded <a href="https://swordapp.github.io/swordv3/metadata.schema.json">here</a>.</p>
<p>An example of the Metadata Document:</p>
<pre><code class="json">{
  &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,

  &quot;@id&quot; : &quot;http://example.com/object/1/metadata&quot;,
  &quot;@type&quot; : &quot;Metadata&quot;,

  &quot;dc:title&quot; : &quot;The title&quot;,
  &quot;dcterms:abstract&quot; : &quot;This is my abstract&quot;,
  &quot;dc:contributor&quot; : &quot;A.N. Other&quot;
}

</code></pre>

<p>The fields available are defined as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@context</td>
<td>string</td>
<td>The JSON-LD Context for this document<br><br>MUST be present.</td>
</tr>
<tr>
<td>@id</td>
<td>string</td>
<td>The URL of the Metadata Document you are looking at<br><br>MUST be present.</td>
</tr>
<tr>
<td>@type</td>
<td>string</td>
<td>JSON-LD identifier for the document type<br><br>This field is used to define the type of the document, and in this case should always be 'Metadata'.  MUST be present.</td>
</tr>
<tr>
<td>^dc:.+$</td>
<td>string</td>
<td>Properties from the DC namespace<br><br>MAY be present.</td>
</tr>
<tr>
<td>^dcterms:.+$</td>
<td>string</td>
<td>Properties from the DCTERMS namespace<br><br>MAY be present.</td>
</tr>
</tbody>
</table>
<p>When sending this document, the client MUST provide a <code>Content-Disposition</code> header of the form:</p>
<pre><code>Content-Disposition: attachment; metadata=true
</code></pre>

<p>Additionally, when sending this document the client SHOULD provide the <code>Metadata-Format</code> header with the identifier for the format: http://purl.org/net/sword/3.0/types/Metadata</p>
<pre><code>Metadata-Format: http://purl.org/net/sword/3.0/types/Metadata
</code></pre>

<p>If the client omits the <code>Metadata-Format</code> header, the server MUST assume that it is the above format.</p>
<p><a name="8.4."></a></p>
<h2>8.4. By-Reference Document</h2>
<p>The By-Reference document allows the client to send a list of one or more files that the server will fetch asynchronously.  The 
By-Reference document can be sent when creating an Object initially, or when appending to or replacing the FileSet in the Object, or 
replacing the Object as a whole.</p>
<p>The full JSON Schema [<a href="#json-schema">JSON-SCHEMA</a>] can be downloaded <a href="https://swordapp.github.io/swordv3/by-reference.schema.json">here</a>.</p>
<p>An example of the By-Reference Document:</p>
<pre><code class="json">{
  &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,

  &quot;@type&quot; : &quot;ByReference&quot;,

  &quot;byReferenceFiles&quot; : [
    {
      &quot;@id&quot; : &quot;http://www.otherorg.ac.uk/by-reference/file.zip&quot;,
      &quot;contentType&quot; : &quot;application/zip&quot;,
      &quot;contentLength&quot; : 123456,
      &quot;contentDisposition&quot; : &quot;attachment; filename=file.zip&quot;,
      &quot;packaging&quot; : &quot;http://purl.org/net/sword/packaging/SimpleZip&quot;,
      &quot;digest&quot; : &quot;SHA256=....&quot;,
      &quot;ttl&quot; : &quot;2018-04-16T00:00:00Z&quot;,
      &quot;dereference&quot; : true
    }
  ]
}

</code></pre>

<p>The fields available are defined as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@context</td>
<td>string</td>
<td>The JSON-LD Context for this document<br><br>MUST be present.</td>
</tr>
<tr>
<td>@type</td>
<td>string</td>
<td>JSON-LD identifier for the document type<br><br>This field is used to define the type of the document, and in this case should always be 'ByReference'.  MUST be present.</td>
</tr>
<tr>
<td>byReferenceFiles</td>
<td>array</td>
<td>List of files to deposit By-Reference<br><br>MUST be present and contain one or more entries</td>
</tr>
<tr>
<td>byReferenceFiles[].@id</td>
<td>string</td>
<td>The URL of the file to be retrieved and deposited<br><br>MUST be present</td>
</tr>
<tr>
<td>byReferenceFiles[].contentDisposition</td>
<td>string</td>
<td>Content-Disposition as it would have been supplied if this were a regular file deposit.<br><br>MUST be present</td>
</tr>
<tr>
<td>byReferenceFiles[].contentLength</td>
<td>integer</td>
<td>Content-Length as it would have been supplied if this were a regular file deposit.<br><br>SHOULD be present</td>
</tr>
<tr>
<td>byReferenceFiles[].contentType</td>
<td>string</td>
<td>The Content-Type of the file to be retrieved and deposited<br><br>MUST be present</td>
</tr>
<tr>
<td>byReferenceFiles[].dereference</td>
<td>boolean</td>
<td>Should the server dereference the file (i.e. download it and store it locally) or should it simply maintain a link to the external resource.<br><br>MUST be present.  Note that servers MAY choose to do both, irrespective of the value here, though if <code>false</code>, the server should make the external link available to users accessing the resource.</td>
</tr>
<tr>
<td>byReferenceFiles[].digest</td>
<td>string</td>
<td>Digest as it would have been supplied if this were a regular file deposit.<br><br>MUST be present</td>
</tr>
<tr>
<td>byReferenceFiles[].packaging</td>
<td>string</td>
<td>The packaging format of the file, or the Binary file identifier<br><br>SHOULD be present.  If this is not provided, the server MUST assume this is the Binary format: http://purl.org/net/sword/3.0/package/Binary</td>
</tr>
<tr>
<td>byReferenceFiles[].ttl</td>
<td>string</td>
<td>A timestamp which indicates when the file will no longer be available (Time To Live)<br><br>If no date is provided, the server MAY assume the file will be available indefinitely.</td>
</tr>
</tbody>
</table>
<p>When sending this document, the client MUST provide a Content-Disposition header of the form:</p>
<pre><code>Content-Disposition: attachment; by-reference=true
</code></pre>

<p><a name="8.5."></a></p>
<h2>8.5. Metadata + By-Reference Document</h2>
<p>In some cases it is convenient to be able to send both Metadata and By-Reference files in a single request.  This is possible because both 
Metadata and By-Reference documents are simply JSON documents; contrast this with sending Metadata and Binary Files, where a 
multipart/related request would be required (which is not supported in SWORD).</p>
<p>To do this, the client may include the Metadata and By-Reference documents embedded in a single JSON document, structured as shown below. 
The entire Metadata document (including its JSON-LD <code>@context</code>) is embedded in a field entitled <code>metadata</code>, and the entire By-Reference 
document (again, with its JSON-LD <code>@context</code>) is embedded in a field entitled <code>by-reference</code>.</p>
<p>When a document of this form is sent, the client MUST set the <code>Content-Disposition</code> header appropriately, to alert the server of its 
required behaviour.</p>
<p>An example of the Metadata + By-Reference Document:</p>
<pre><code class="json">{
  &quot;metadata&quot; : {
    &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,
    &quot;@type&quot; : &quot;Metadata&quot;,

    &quot;dcterms:abstract&quot; : &quot;....&quot;,
    &quot;dc:contributor&quot; : &quot;...&quot;,
    &quot;etc...&quot; : &quot;....&quot;
  },

  &quot;by-reference&quot; : {
    &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,
    &quot;@type&quot; : &quot;ByReference&quot;,

    &quot;byReferenceFiles&quot; : []
  }
}

</code></pre>

<p>When sending this document, the client MUST provide a <code>Content-Disposition</code> header of the form:</p>
<pre><code>Content-Disposition: attachment; metadata=true; by-reference=true
</code></pre>

<p>Additionally, when sending this document the client SHOULD provide the <code>Metadata-Format</code> header with the identifier for the format: 
http://purl.org/net/sword/3.0/types/Metadata</p>
<pre><code>Metadata-Format: http://purl.org/net/sword/3.0/types/Metadata
</code></pre>

<p>If the client omits the <code>Metadata-Format</code> header, the server MUST assume that it is the above format.</p>
<p><a name="8.6."></a></p>
<h2>8.6. Status Document</h2>
<p>The status document is provided in response to a deposit operation on a Service-URL, and can be retrieved at any subsequent point by a
GET on the Object-URL.  It tells the client detailed information about the content and current state of the item.</p>
<p>The full JSON Schema [<a href="#json-schema">JSON-SCHEMA</a>] can be downloaded <a href="https://swordapp.github.io/swordv3/status.schema.json">here</a>.</p>
<p>An example of the Status Document:</p>
<pre><code class="json">{
  &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,

  &quot;@id&quot; : &quot;http://example.com/object/1&quot;,
  &quot;@type&quot; : &quot;Status&quot;,
  &quot;eTag&quot; : &quot;...&quot;,

  &quot;metadata&quot; : {
    &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/metadata&quot;,
    &quot;eTag&quot; : &quot;...&quot;
  },
  &quot;fileSet&quot; : {
    &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/fileset&quot;,
    &quot;eTag&quot; : &quot;...&quot;
  },

  &quot;service&quot; : &quot;http://swordapp.org/deposit/43&quot;,

  &quot;state&quot; : [
    {
      &quot;@id&quot; : &quot;http://purl.org/net/sword/3.0/state/inProgress&quot;,
      &quot;description&quot; : &quot;the item is currently inProgress&quot;
    }
  ],

  &quot;actions&quot; : {
    &quot;getMetadata&quot; : true,
    &quot;getFiles&quot; : true,
    &quot;appendMetadata&quot; : true,
    &quot;appendFiles&quot; : true,
    &quot;replaceMetadata&quot; : true,
    &quot;replaceFiles&quot; : true,
    &quot;deleteMetadata&quot; : true,
    &quot;deleteFiles&quot; : true,
    &quot;deleteObject&quot; : true
  },

  &quot;lastAction&quot; : {
    &quot;timestamp&quot; : &quot;[xsd:dateTime]&quot;,
    &quot;log&quot; : &quot;description of the event that occurred, with any verbose information&quot;,
    &quot;treatment&quot; : {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/treatment&quot;,
      &quot;description&quot; : &quot;treatment description&quot;
    }
  },

  &quot;links&quot; : [
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/col1/mydeposit.html&quot;,
      &quot;rel&quot; : [&quot;alternate&quot;],
      &quot;contentType&quot; : &quot;text/html&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/package.zip&quot;,
      &quot;rel&quot; : [&quot;http://purl.org/net/sword/3.0/terms/originalDeposit&quot;],
      &quot;contentType&quot; : &quot;application/zip&quot;,
      &quot;packaging&quot; : &quot;http://purl.org/net/sword/3.0/package/SimpleZip&quot;,
      &quot;depositedOn&quot; : &quot;[timestamp]&quot;,
      &quot;depositedBy&quot; : &quot;[user identifier]&quot;,
      &quot;depositedOnBehalfOf&quot; : &quot;[user identifier]&quot;,
      &quot;byReference&quot; : &quot;http://www.otherorg.ac.uk/by-reference/file.zip&quot;,
      &quot;status&quot; : &quot;http://purl.org/net/sword/3.0/filestate/ingested&quot;,
      &quot;log&quot; : &quot;[any information associated with the deposit that the client should know]&quot;
    },
      {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/file1.pdf&quot;,
      &quot;rel&quot; : [&quot;http://purl.org/net/sword/3.0/terms/derivedResource&quot;],
      &quot;contentType&quot; : &quot;application/pdf&quot;,
      &quot;derivedFrom&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/package.zip&quot;,
      &quot;dcterms:relation&quot; : &quot;http://www.myorg.ac.uk/repo/123456789/file1.pdf&quot;,
      &quot;dcterms:replaces&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/versions/file1.1.pdf&quot;,
      &quot;methods&quot;: [&quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;],
      &quot;eTag&quot; : &quot;...&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/package.1.zip&quot;,
      &quot;rel&quot; : [&quot;http://purl.org/net/sword/terms/packagedContent&quot;],
      &quot;contentType&quot; : &quot;application/zip&quot;,
      &quot;packaging&quot; : &quot;http://purl.org/net/sword/3.0/package/SimpleZip&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.swordserver.ac.uk/col1/mydeposit/metadata.xml&quot;,
      &quot;rel&quot; : [&quot;http://purl.org/net/sword/3.0/terms/formattedMetadata&quot;],
      &quot;contentType&quot; : &quot;text/json&quot;,
      &quot;metadataFormat&quot; : &quot;http://purl.org/net/sword/3.0/types/Metadata&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/versions/file1.1.pdf&quot;,
      &quot;rel&quot; : [&quot;http://purl.org/net/sword/3.0/terms/derivedResource&quot;],
      &quot;contentType&quot; : &quot;application/pdf&quot;,
      &quot;dcterms:isReplacedBy&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/file1.pdf&quot;,
      &quot;versionReplacedOn&quot; : &quot;[xsd:dateTime]&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/big.zip&quot;,
      &quot;rel&quot; : [
        &quot;http://purl.org/net/sword/3.0/terms/segmentedDeposit&quot;,
        &quot;http://purl.org/net/sword/3.0/terms/originalDeposit&quot;,
        &quot;http://purl.org/net/sword/3.0/terms/fileSetReplacement&quot;
      ],
      &quot;contentType&quot; : &quot;application/zip&quot;,
      &quot;packaging&quot; : &quot;http://purl.org/net/sword/3.0/package/SwordBagIt&quot;,
      &quot;depositedOn&quot; : &quot;[xsd:dateTime]&quot;,
      &quot;depositedBy&quot; : &quot;[user identifier]&quot;,
      &quot;depositedOnBehalfOf&quot; : &quot;[user identifier]&quot;,
      &quot;segments&quot; : {
        &quot;received&quot; : [1,2,4],
        &quot;expecting&quot; : [3,5],
        &quot;size&quot; : 10000000,
        &quot;segment_size&quot; : 2000000
      },
      &quot;status&quot; : &quot;http://purl.org/net/sword/3.0/filestate/pending&quot;
    },
    {
      &quot;@id&quot; : &quot;http://www.myorg.ac.uk/sword3/object1/reference.zip&quot;,
      &quot;rel&quot; : [
        &quot;http://purl.org/net/sword/3.0/terms/byReferenceDeposit&quot;,
        &quot;http://purl.org/net/sword/3.0/terms/originalDeposit&quot;
      ],
      &quot;byReference&quot; : &quot;http://www.otherorg.ac.uk/by-reference/file2.zip&quot;,
      &quot;log&quot; : &quot;Any information on the download, especially if it failed&quot;,
      &quot;methods&quot;: [&quot;GET&quot;, &quot;PUT&quot;, &quot;DELETE&quot;],
      &quot;eTag&quot; : &quot;...&quot;,
      &quot;status&quot; : &quot;http://purl.org/net/sword/3.0/filestate/ingested&quot;
    }
  ],

  &quot;forwarding&quot; : [
    {
      &quot;@id&quot; : &quot;http://www.otherorg.ac.uk/sword3/object12&quot;,

      &quot;links&quot; : [
        {
          &quot;@id&quot; : &quot;http://www.otherorg.ac.uk/col2/yourdeposit.html&quot;,
          &quot;rel&quot; : [&quot;alternate&quot;],
          &quot;contentType&quot; : &quot;text/html&quot;
        }
      ]
    }
  ]
}

</code></pre>

<p>The fields available are defined as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@context</td>
<td>string</td>
<td>The JSON-LD Context for this document<br><br>MUST be present.</td>
</tr>
<tr>
<td>@id</td>
<td>string</td>
<td>The Object-URL for this document<br><br>MUST be present</td>
</tr>
<tr>
<td>@type</td>
<td>string</td>
<td>JSON-LD identifier for the document type<br><br>This field is used to define the type of the document, and in this case should always be 'Status'.  MUST be present.</td>
</tr>
<tr>
<td>actions</td>
<td>object</td>
<td>Container for the list of actions that are available against the object for the client.<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.appendFiles</td>
<td>boolean</td>
<td>Whether the client can issue a request to append one or more files (individually or via a package) to the item<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.appendMetadata</td>
<td>boolean</td>
<td>Whether the client can issue a request to append the metadata of the item<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.deleteFiles</td>
<td>boolean</td>
<td>Whether the client can issue a request to delete files in the item.  This may be a single file or all files.<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.deleteMetadata</td>
<td>boolean</td>
<td>Whether the client can issue a request to delete all the item metadata.<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.deleteObject</td>
<td>boolean</td>
<td>Whether the client can issue a request to delete the entire object.<br><br>MUST be present.</td>
</tr>
<tr>
<td>actions.getFiles</td>
<td>boolean</td>
<td>Whether the client can issue a request to retrieve any/all files in the item (both Binary Files and Packaged Content)<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.getMetadata</td>
<td>boolean</td>
<td>Whether the client can issue a request to retrieve the item metadata<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.replaceFiles</td>
<td>boolean</td>
<td>Whether the client can issue a request to replace files in an item.  This may be a single file or all of the files.<br><br>MUST be present</td>
</tr>
<tr>
<td>actions.replaceMetadata</td>
<td>boolean</td>
<td>Whether the client can issue a request to replace the item metadata.<br><br>MUST be present</td>
</tr>
<tr>
<td>eTag</td>
<td>string</td>
<td>The current ETag for the Object<br><br>MUST be present if the repository enforces concurrency control</td>
</tr>
<tr>
<td>fileSet</td>
<td>object</td>
<td>Information about the identifier/version of the Object's FileSet<br><br>MUST be present.</td>
</tr>
<tr>
<td>fileSet.@id</td>
<td>string</td>
<td>The FileSet-URL for this Object<br><br>MUST be present.</td>
</tr>
<tr>
<td>fileSet.eTag</td>
<td>string</td>
<td>The Etag for the FileSet<br><br>MUST be present if the server supports concurrency control</td>
</tr>
<tr>
<td>forwarding</td>
<td>array</td>
<td>List of other locations where the object is available.<br><br>MAY be present</td>
</tr>
<tr>
<td>forwarding[].@id</td>
<td>string</td>
<td>The SWORD identifier for the Object in the other system<br><br>MAY be present</td>
</tr>
<tr>
<td>forwarding[].links</td>
<td>array</td>
<td>List of links to the Object as it appears in the other system<br><br>MAY be present</td>
</tr>
<tr>
<td>forwarding[].links[].@id</td>
<td>string</td>
<td>The URL of a representation of the Object in the other system<br><br>MUST be present</td>
</tr>
<tr>
<td>forwarding[].links[].contentType</td>
<td>string</td>
<td>The Content Type of the resource<br><br>MAY be present</td>
</tr>
<tr>
<td>forwarding[].links[].rel</td>
<td>array</td>
<td>The relationship to the Object that this URL has<br><br>MAY be present</td>
</tr>
<tr>
<td>lastAction</td>
<td>object</td>
<td>Container for information about the last action taken on the object by a client (not necessarily the current client).<br><br>SHOULD be present, if appropriate</td>
</tr>
<tr>
<td>lastAction.log</td>
<td>string</td>
<td>Detailed log information about the last action<br><br>MAY be present</td>
</tr>
<tr>
<td>lastAction.timestamp</td>
<td>string</td>
<td>When the last action was taken by the client<br><br>SHOULD be present</td>
</tr>
<tr>
<td>lastAction.treatment</td>
<td>object</td>
<td>Container for information about the treatment the item received in the last action<br><br>MAY be present</td>
</tr>
<tr>
<td>lastAction.treatment.@id</td>
<td>string</td>
<td>URL for information about the treatment the item received<br><br>MAY be present</td>
</tr>
<tr>
<td>lastAction.treatment.description</td>
<td>string</td>
<td>Description of the treatment the item received<br><br>MAY be present</td>
</tr>
<tr>
<td>links</td>
<td>array</td>
<td>List of link objects referring to the various files, both content and metadata, available on the object<br><br>MUST be present if there is one or more links available to the client</td>
</tr>
<tr>
<td>links[].@id</td>
<td>string</td>
<td>The URL of the resource<br><br>MUST be present</td>
</tr>
<tr>
<td>links[].byReference</td>
<td>string</td>
<td>The external URL of the location a By-Reference deposit was retrieved from<br><br>SHOULD be present if this is an Original Deposit that was deposited By-Reference, or is an active By-Reference deposit</td>
</tr>
<tr>
<td>links[].contentType</td>
<td>string</td>
<td>Content type of the resource<br><br>SHOULD be present</td>
</tr>
<tr>
<td>links[].dcterms:isReplacedBy</td>
<td>string</td>
<td>URL to a newer version of the file in the same Object, if this is present as a resource<br><br>SHOULD be present, if newer version is present</td>
</tr>
<tr>
<td>links[].dcterms:relation</td>
<td>string</td>
<td>URL to a non-sword access point to the file<br><br>MAY be present.  For example, the URL from which an end-user would download the file via the website.  This related URL does not need to support any of the SWORD protocol operations, and indeed may even be on a server or application which has no sword support.  Primary use case is to redirect the user to the web front end for the repository.</td>
</tr>
<tr>
<td>links[].dcterms:replaces</td>
<td>string</td>
<td>URL to an older version of the file in the same Object, if this is also present as a resource.<br><br>SHOULD be present, if an older version of the file is present</td>
</tr>
<tr>
<td>links[].depositedBy</td>
<td>string</td>
<td>Identifier for the user that deposited the item<br><br>SHOULD be present if this is an Original Deposit</td>
</tr>
<tr>
<td>links[].depositedOn</td>
<td>string</td>
<td>Timestamp of when the deposit happened<br><br>SHOULD be present if this is an Original Deposit</td>
</tr>
<tr>
<td>links[].depositedOnBehalfOf</td>
<td>string</td>
<td>Identifier for the user that the item was deposited on behalf of.<br><br>SHOULD be present if this is an Original Deposit that was done On-Behalf-Of another user</td>
</tr>
<tr>
<td>links[].derivedFrom</td>
<td>string</td>
<td>Reference to URL of resource from which the current resource was derived, for example, if extracted from a package.<br><br>SHOULD be present, if the resource is derived from another resource</td>
</tr>
<tr>
<td>links[].eTag</td>
<td>string</td>
<td>The eTag of the resource<br><br>MUST be present if the server supports concurrency control and the resource is available to the client to modify</td>
</tr>
<tr>
<td>links[].log</td>
<td>string</td>
<td>Any information associated with the deposit that the client should know.<br><br>MAY be present</td>
</tr>
<tr>
<td>links[].packaging</td>
<td>string</td>
<td>The package format identifier if the resource is a package.<br><br>SHOULD, if the resource is a package</td>
</tr>
<tr>
<td>links[].rel</td>
<td>array</td>
<td>The relationship between the resource and the object.<br><br>MUST be present. Note that multiple relationships are supported.</td>
</tr>
<tr>
<td>links[].segments</td>
<td>object</td>
<td>Container for information on segmented upload files<br><br>MUST be present for files undergoing segmented upload</td>
</tr>
<tr>
<td>links[].segments.expecting</td>
<td>array</td>
<td>This list of integers identifying the segments which are expected and that have not yet been deposited<br><br>MUST be present</td>
</tr>
<tr>
<td>links[].segments.received</td>
<td>array</td>
<td>The list of integers identifying the segments that have been successfully uploaded so far.<br><br>MUST be present.</td>
</tr>
<tr>
<td>links[].segments.segment_size</td>
<td>integer</td>
<td>The size in bytes of the segments (except the final one) that will be uploaded.<br><br>MUST be present.</td>
</tr>
<tr>
<td>links[].segments.size</td>
<td>integer</td>
<td>The size in bytes of the final resulting assembled file.<br><br>MUST be present.</td>
</tr>
<tr>
<td>links[].status</td>
<td>string</td>
<td>The status of the resource, with regard to ingest.<br><br>SHOULD be present.  For example, packaged resources which are still being unpacked and ingested may announce their status here.  Likewise, by-reference deposits may do the same.  MUST be one of the allowed status URIs.  Any associated information to go along with the status, especially if the status is an error, SHOULD be in link[].log.  If no value is provided, the client MUST assume that the item is in the status: http://purl.org/net/sword/3.0/filestate/ingested</td>
</tr>
<tr>
<td>links[].versionReplacedOn</td>
<td>string</td>
<td>Date that the current resource was replaced by a newer resource<br><br>SHOULD be present if dcterms:isReplacedBy is present</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td>Information about the identifier/version of the Object's Metadata<br><br>MUST be present.</td>
</tr>
<tr>
<td>metadata.@id</td>
<td>string</td>
<td>The Metadata-URL for this Object<br><br>MUST be present</td>
</tr>
<tr>
<td>metadata.eTag</td>
<td>string</td>
<td>The ETag for the Metadata<br><br>MUST be present if the server supports concurrency control</td>
</tr>
<tr>
<td>service</td>
<td>string</td>
<td>The URL for the service to which this item was deposited (the Service-URL)<br><br>MUST be present.  This is the URL from which the client can retrieve information about the settings for the server that are relevant to this item (e.g. max upload sizes, etc)</td>
</tr>
<tr>
<td>state</td>
<td>array</td>
<td>List of states that the item is in on the server.<br><br>At least one state MUST be present, using the SWORD state vocabulary.  Other states using server-specific vocabularies may also be used alongside.</td>
</tr>
<tr>
<td>state[].@id</td>
<td>string</td>
<td>Identifier for the state.<br><br>MUST be present.  At least one such identifier MUST be from the SWORD state vocabulary.</td>
</tr>
<tr>
<td>state[].description</td>
<td>string</td>
<td>Human readable description of the state<br><br>MAY be present</td>
</tr>
</tbody>
</table>
<p><a name="8.6.1."></a></p>
<h3>8.6.1. Available <code>rel</code> types and their meanings</h3>
<h4>alternate</h4>
<p>An alternate, non-SWORD URL which will allow the user to access the same object.  For example, this could be the URL of the landing page in the repository for the item.</p>
<h4>http://purl.org/net/sword/3.0/terms/originalDeposit</h4>
<p>The resource (file or package) was explicitly deposited via some deposit operation.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>packaging</li>
<li>depositedOn</li>
<li>depositedOnBehalfOf</li>
<li>status</li>
<li>log</li>
<li>dcterms:relation</li>
<li>dcterms:replaces</li>
<li>dcterms:isReplacedBy</li>
<li>versionReplaced</li>
<li>eTag</li>
<li>byReference</li>
</ul>
<h4>http://purl.org/net/sword/3.0/terms/derivedResource</h4>
<p>A file which was unpacked or otherwise derived from another deposited resource, and which itself was not explicitly deposited through some deposit operation.  The main usage would be to identify files which were extracted from a deposited zip file.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>derivedFrom</li>
<li>dcterms:relation</li>
<li>dcterms:replaces</li>
<li>dcterms:isReplacedBy</li>
<li>versionReplaced</li>
<li>eTag</li>
</ul>
<h4>http://purl.org/net/sword/terms/packagedContent</h4>
<p>A resource which makes this object available packaged in the specified package format on HTTP GET.  This is not a resource which has been deposited or derived (though it may be very similar to an originally deposited package), it is one which the server makes available as a service to the client.  Packages may be pre-built or assembled on the fly - that responsibility rests with the server.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>packaging</li>
</ul>
<h4>http://purl.org/net/sword/3.0/terms/formattedMetadata</h4>
<p>A resource which makes this object’s metadata available, serialised in the specified metadata format on HTTP GET.  This is not a resource which has been deposited or derived (though it may be very similar to the originally deposited metadata), it is one which the server makes available as a service to the client.  Metadata documents may be pre-built or assembled on the fly - that responsibility rests with the server.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>metadataFormat</li>
</ul>
<h4>http://purl.org/net/sword/3.0/terms/segmentedDeposit</h4>
<p>A file which is actively being deposited in segments.  Often will also have the rel for originalDeposit, and once all segments have been uploaded the segmentedDeposit rel can be removed.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>segments</li>
</ul>
<h4>http://purl.org/net/sword/3.0/terms/byReferenceDeposit</h4>
<p>A file which is currently being downloaded from an external reference.  Often will also have the rel for originalDeposit, and once all segments have been uploaded the byReferenceDeposit rel can be removed.</p>
<p>The relevant properties of the link section for any resource with this rel are</p>
<ul>
<li>byReference</li>
<li>status</li>
</ul>
<h4>http://purl.org/net/sword/3.0/terms/fileSetReplacement</h4>
<p>A segmentedDeposit or byReferenceDeposit which is also going to replace all of the current Object’s content when it is completely uploaded/downloaded, reassembled (if needed) and unpacked (if needed).  This value MUST only appear alongside a segmentedDeposit rel or byReferenceDeposit rel.</p>
<p><a name="8.6.2."></a></p>
<h3>8.6.2. Required SWORD State Information</h3>
<p><code>state/@id</code> MUST contain one of:</p>
<dl><dt><a name="http://purl.org/net/sword/3.0/state/accepted">http://purl.org/net/sword/3.0/state/accepted</dt><dd>for records accepted for processing but not yet created</dd><dt><a name="http://purl.org/net/sword/3.0/state/inprogress">http://purl.org/net/sword/3.0/state/inProgress</dt><dd>for records that have been deposited, but for which the deposit has not yet completed</dd><dt><a name="http://purl.org/net/sword/3.0/state/inworkflow">http://purl.org/net/sword/3.0/state/inWorkflow</dt><dd>for records that are in the server’s ingest workflow</dd><dt><a name="http://purl.org/net/sword/3.0/state/ingested">http://purl.org/net/sword/3.0/state/ingested</dt><dd>for records that are in the server’s archive state, whatever that might mean (e.g. published to the web)</dd><dt><a name="http://purl.org/net/sword/3.0/state/rejected">http://purl.org/net/sword/3.0/state/rejected</dt><dd>for records that have been rejected from the server’s workflow</dd><dt><a name="http://purl.org/net/sword/3.0/state/deleted">http://purl.org/net/sword/3.0/state/deleted</dt><dd>for tombstone records</dd></dl>

<p>The state field is a list, so it may also contain other states that are server-specific in addition to the SWORD values.</p>
<p><a name="8.6.3."></a></p>
<h3>8.6.3. Ingest Statuses for Individual Files</h3>
<p>Some files, when deposited, may be processed asynchronously to the client’s request.  For example, large files that require unpacking, 
segmented uploads, by-reference deposits, etc.  In these cases, the client will not receive feedback on the state or success of their 
deposit in the request/response exchange.  Instead, the client may monitor the file(s) via the Status document, and for each appropriate 
file (Original Deposits), a “status” field will provide information on the current status of processing for that file.  </p>
<p>The following statuses are permitted, servers SHOULD provide one of these by each relevant file:</p>
<dl><dt><a name="http://purl.org/net/sword/3.0/filestate/pending">http://purl.org/net/sword/3.0/filestate/pending</dt><dd>the server has not yet started to process this file. It may be in a queue, or it may still be in the process of deposit via a Segmented Upload.</dd><dt><a name="http://purl.org/net/sword/3.0/filestate/downloading">http://purl.org/net/sword/3.0/filestate/downloading</dt><dd>the server has started to download your By-Reference file, and is not yet complete</dd><dt><a name="http://purl.org/net/sword/3.0/filestate/unpacking">http://purl.org/net/sword/3.0/filestate/unpacking</dt><dd>the server has started unpacking your Packaged Content, and is not yet finished</dd><dt><a name="http://purl.org/net/sword/3.0/filestate/error">http://purl.org/net/sword/3.0/filestate/error</dt><dd>there was an error either downloading or unpacking your file; information should be available in the “log” field to aid the client in understanding what went wrong.</dd><dt><a name="http://purl.org/net/sword/3.0/filestate/ingested">http://purl.org/net/sword/3.0/filestate/ingested</dt><dd>the file has been successfully ingested</dd></dl>

<p><a name="8.7."></a></p>
<h2>8.7. Error Document</h2>
<p>An error document is returned at any point that a synchronous operation fails.</p>
<p>The full JSON Schema [<a href="#json-schema">JSON-SCHEMA</a>] can be downloaded <a href="https://swordapp.github.io/swordv3/error.schema.json">here</a>.</p>
<p>An example of the Error Document:</p>
<pre><code class="json">{
  &quot;@context&quot; : &quot;http://swordapp.org/swordv3.jsonld&quot;,

  &quot;@type&quot; : &quot;BadRequest&quot;,

  &quot;timestamp&quot; : &quot;[xsd:dateTime]&quot;,
  &quot;error&quot; : &quot;error summary&quot;,
  &quot;log&quot; : &quot;text log of any debug information for the client&quot;
}

</code></pre>

<p>The fields available are defined as follows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@context</td>
<td>string</td>
<td>The JSON-LD Context for this document<br><br>MUST be present</td>
</tr>
<tr>
<td>@type</td>
<td>string</td>
<td>JSON-LD identifier for the document type<br><br>This field is used to define the type of the document, and in this case should be one of the allowed Error Doucment types.  MUST be present.</td>
</tr>
<tr>
<td>error</td>
<td>string</td>
<td>A short summary/title for the error<br><br>MUST be present</td>
</tr>
<tr>
<td>log</td>
<td>string</td>
<td>Some detail as to the error, with any information that might help resolve it.<br><br>SHOULD be present</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>When the error occurred.<br><br>MUST be present</td>
</tr>
</tbody>
</table>
<p><a name="8.7.1."></a></p>
<h3>8.7.1. Error Types</h3>
<p>The following are the error types that are available (to place in <code>@type</code>), their associated HTTP Status Code, and the legitimate reasons
for returning that error:</p>
<table>
<thead>
<tr>
<th>Error Type</th>
<th>Error Code</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>BadRequest</td>
<td>400</td>
<td>The request did not meet the standard specified by the SWORD protocol. This error can be used when no other error is appropriate</td>
</tr>
<tr>
<td>ContentMalformed</td>
<td>400</td>
<td>The body content of the request was malformed in some way, such that the server cannot read it correctly.</td>
</tr>
<tr>
<td>AuthenticationFailed</td>
<td>403</td>
<td>The request supplied invalid credentials, or no credentials, when the server was expecting to authenticate the request.</td>
</tr>
<tr>
<td>MethodNotAllowed</td>
<td>405</td>
<td>The request is for a method on a resource that is not permitted. This may be permanent, temporary, and may depend on the client’s credentials</td>
</tr>
<tr>
<td>OnBehalfOfNotAllowed</td>
<td>412</td>
<td>The request contained an <code>On-Behalf-Of</code> header, although the server indicates that it does not support this.</td>
</tr>
<tr>
<td>ETagNotMatched</td>
<td>412</td>
<td>The client supplied an <code>If-Match</code> header which did not match the current <code>ETag</code> for the resource being updated.</td>
</tr>
<tr>
<td>MaxUploadSizeExceeded</td>
<td>413</td>
<td>The request supplied body content which is larger than that supported by the server.</td>
</tr>
<tr>
<td>FormatHeaderMismatch</td>
<td>415</td>
<td>The <code>Metadata-Format</code> or <code>Packaging</code> header does not match what the server found when looking at the Metadata or Packaged Content supplied in a request.</td>
</tr>
</tbody>
</table>
<p><a name="9."></a></p>
<h1>9. Content Disposition</h1>
<p>SWORD uses the <code>Content-Disposition</code> header in client requests to indicate to the server information about the payload being delivered. 
Traditionally <code>Content-Disposition</code> is an HTTP response header, but it makes sense in the PUSH context of SWORD to use this as a request 
header.  We follow [<a href="#rfc6266">RFC6266</a>] for its usage.</p>
<p>Implementers should also note [<a href="#rfc5987">RFC5987</a>] if sending filenames which require characters outside the ISO-8859-1 character set.</p>
<p>The general format of a Content-Disposition header is as follows:</p>
<pre><code>Content-Disposition: [disposition type]; [disposition param]=[value]; ...
</code></pre>

<p>There are three general deposit operations in SWORD:</p>
<ol>
<li>A direct upload of some content, which may be Metadata, a By-Reference document, or a Binary File (which may itself be Packaged Content)</li>
<li>A Segment Upload Initialisation</li>
<li>A segment for a Segment Upload</li>
</ol>
<p>Each of these has a different Content-Disposition, which makes it clear to the server what it should do with that content:</p>
<p><a name="9.1."></a></p>
<h2>9.1. Direct Uploads:</h2>
<ul>
<li>MUST have the disposition type <code>attachment</code></li>
<li>A Direct Upload containing Metadata MUST contain the disposition param <code>metadata=true</code>.</li>
<li>A Direct Upload containing ByReference Files, MUST contain the disposition param <code>by-reference=true</code></li>
<li>A Direct Upload containing a Binary File or Packaged Content MAY contain the disposition param <code>filename</code> (or <code>filename*</code> if using a 
character set outside of ISO-8859-1).</li>
</ul>
<p><a name="9.2."></a></p>
<h2>9.2. Segment Upload Initialisation:</h2>
<ul>
<li>MUST have the disposition type <code>segment-init</code></li>
<li>MUST follow the documentation in the [File Segment Upload] section of this specification on constructing the <code>Content-Disposition</code> for a 
Segment Upload Initialisation</li>
</ul>
<p><a name="9.3."></a></p>
<h2>9.3. Segment Upload:</h2>
<ul>
<li>MUST have the disposition type <code>segment</code></li>
<li>MUST follow the documentation in the [File Segment Upload] section of this specification on constructing the <code>Content-Disposition</code> for 
Uploading Segments</li>
</ul>
<p><a name="10."></a></p>
<h1>10. Content Digests</h1>
<p>In order to ensure that the content transmitted via SWORD is correct when it arrives at its destination, clients MUST provide Digests that 
servers MUST check against incoming content.</p>
<p><a name="10.1."></a></p>
<h2>10.1. Announcing Support For Digests</h2>
<p>Servers can announce support for the Digest formats that they support in the Service Document as follows:</p>
<pre><code class="json">{
  &quot;digest&quot;: [
    &quot;SHA-256&quot;, 
    &quot;SHA&quot;, 
    &quot;MD5&quot;
  ]
}
</code></pre>

<p>The Server SHOULD list all the digest formats that it supports.  Servers MUST support at least SHA-256 and MAY support any other digest 
formats.</p>
<p>The Digest formats MUST be identified as per the IANA HTTP Digest Algorithm values: [<a href="#iana_digest">IANA Digest</a>]</p>
<p><a name="10.2."></a></p>
<h2>10.2. Transmitting Digests</h2>
<p>SWORD uses the recommendations of [<a href="#rfc3230">RFC3230</a>] for transmitting base64 encoded Digests of request bodies.</p>
<p>For every request where there is a request body, the client MUST attach the <code>Digest</code> header with the appropriate content:</p>
<pre><code>Digest: SHA-256=MzA1ZmIzMDJiZjA4MzUzYTg5ZGY4NDIxMjcyY2JmZTEwNzM5ODdmMjJhY2Y1ZDc5NzFhOTY3MmM1MGNkN2ZlMA==
</code></pre>

<p>Note that the client MAY send multiple digests from different algorithms, separated by commas in the header:</p>
<pre><code>Digest: SHA-256=MzA1ZmIzMDJiZjA4MzUzYTg5ZGY4NDIxMjcyY2JmZTEwNzM5ODdmMjJhY2Y1ZDc5NzFhOTY3MmM1MGNkN2ZlMA==, MD5=ZjQxNjA3N2M3MDdhODJkZGJlMGE0YTk2NGRjZWEyNWE=
</code></pre>

<p>The server MUST validate at least one digest, SHOULD validate all digests, though MAY choose its preferred format to validate against.</p>
<p><a name="11."></a></p>
<h1>11. Continued Deposit</h1>
<p>Some systems may wish to give the client more control over the ingest process, and SWORD uses the <code>In-Progress</code> HTTP header to allow the 
client to indicate that a deposit should not yet be injected into any post-submission or pre-ingest workflow. The <code>In-Progress</code> header MUST 
take the value <code>true</code> or <code>false</code>, and if it is not present the server MUST assume that it is <code>false</code> and behave as described below.</p>
<p>An example use case for this is that the client may be embedded into a system which uses the SWORD server as a storage layer, but which 
cannot acquire all of the content for a "finished" item in one deposit operation. Consider a user-facing system which encourages users to 
upload files one at a time through some web interface, which causes each file to be directly deposited onto the SWORD server. At the start 
of the deposit the client asserts that deposit is <code>In-Progress: true</code>, and then proceeds to upload files. If uploading them to the 
Object-URL the client continues to assert <code>In-Progress: true</code> on each request (if depositing to other URLs this is not necessary). This 
goes on until the user confirms that they have uploaded all the relevant files, or navigates away from the page. At that stage, the client 
can issue a blank HTTP POST request to the SWORD server, with <code>In-Progress: false</code> to complete the deposit.</p>
<p>Note that the <code>In-Progress</code> header is intended to indicate to the server that further content will be coming in which is associated with 
the existing content, before it can be considered "complete". It is not intended to provide workflow control, and clients MUST NOT assume 
that asserting <code>In-Progress: true</code> will have any specific effect on the state of the item.</p>
<p><a name="11.1."></a></p>
<h2>11.1. Deposit Complete</h2>
<p>If <code>In-Progress</code> is <code>false</code>, the server MAY assume that it can carry on processing the deposit as it sees fit.</p>
<p><a name="11.2."></a></p>
<h2>11.2. Deposit Incomplete</h2>
<p>If <code>In-Progress</code> is <code>true</code>, the server SHOULD expect the client to provide further updates to the item some undetermined time in the future. 
Details of how this is implemented is dependent on the server's purpose. For example, a repository system may hold items which are marked 
<code>In-Progress</code> in a workspace until such time as a client request indicates that the deposit is complete.</p>
<p><a name="11.3."></a></p>
<h2>11.3. Completing a Previously Incomplete Deposit</h2>
<p>The client can assert that a deposit process has completed by issuing an HTTP POST to the Object-URL with a blank request body and with the 
<code>In-Progress</code> header set to <code>false</code> (it may simply omit the header altogether too, as this is treated as <code>In-Progress: false</code> by the 
server). The client MAY specify a <code>Content-Length: 0</code> HTTP header, and MUST NOT include any body content.</p>
<ul>
<li>The client MAY provide an In-Progress header with a value of false</li>
<li>The client MAY provide an On-Behalf-Of header</li>
</ul>
<p>Once the server has processed the request it MUST respond with status code 204 (No Content), or a suitable error.</p>
<p><a name="12."></a></p>
<h1>12. References</h1>
<p><a name="atompub"><strong>AtomPub</strong> Gregario, J. and B. de hOra, "The Atom Publishing Protocol", RFC 5023, October 2007. <a href="http://www.ietf.org/rfc/rfc5023.txt">http://www.ietf.org/rfc/rfc5023.txt</a> </p>
<p><a name="iana_digest"><strong>IANA Digest</strong> Hypertext Transfer Protocol (HTTP) Digest Algorithm Values <a href="https://www.iana.org/assignments/http-dig-alg/http-dig-alg.xhtml">https://www.iana.org/assignments/http-dig-alg/http-dig-alg.xhtml</a> </p>
<p><a name="json-ld"><strong>JSON-LD</strong> JSON-LD 1.1, A JSON-based Serialization for Linked Data, 28 March 2018 <a href="https://json-ld.org/spec/latest/json-ld/">https://json-ld.org/spec/latest/json-ld/</a> </p>
<p><a name="json-schema"><strong>JSON-SCHEMA</strong> JSON Schema: A Media Type for Describing JSON Documents <a href="http://json-schema.org/latest/json-schema-core.html">http://json-schema.org/latest/json-schema-core.html</a> </p>
<p><a name="openapi"><strong>OpenAPI</strong> OpenAPI Specification, Version 3.0.0 <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md</a> </p>
<p><a name="rfc2119"><strong>RFC2119</strong> Bradner, S. "Key words for use in RFCs to Indicate Requirement Levels", March 1997. <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a> </p>
<p><a name="rfc3230"><strong>RFC3230</strong> J. Mogul et al "Instance Digests in HTTP" <a href="https://www.ietf.org/rfc/rfc3230.txt">https://www.ietf.org/rfc/rfc3230.txt</a> </p>
<p><a name="rfc5987"><strong>RFC5987</strong> J. Reschke. "Character Set and Language Encoding for Hypertext Transfer Protocol (HTTP) Header Field Parameters" <a href="https://tools.ietf.org/html/rfc5987">https://tools.ietf.org/html/rfc5987</a> </p>
<p><a name="rfc6266"><strong>RFC6266</strong> J. Reschke. "Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)", 2011 <a href="https://tools.ietf.org/html/rfc6266">https://tools.ietf.org/html/rfc6266</a> </p>
<p><a name="sword_1.3"><strong>SWORD 1.3</strong> Downing, J. "SWORD AtomPub Profile version 1.3", 2008. <a href="http://www.swordapp.org/docs/sword-profile-1.3.html">http://www.swordapp.org/docs/sword-profile-1.3.html</a> </p>
<p><a name="sword_2.0"><strong>SWORD 2.0</strong> Jones, R. and Lewis, S. "SWORD 2.0 Profile", 2011 <a href="http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html">http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html</a> </p>
<p></div></p></body>
</html>

